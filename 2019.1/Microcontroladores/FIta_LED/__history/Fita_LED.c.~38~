//#include <Fita_LED.h>
#include <16F877A.h>
#device ADC=8

#include <string.h>

#FUSES NOBROWNOUT               //No brownout reset
#FUSES NOLVP                    //No low voltage prgming, B3(PIC16) or B5(PIC18) used for I/O

#use delay(crystal=20000000)
#use rs232(baud=9600,parity=N,xmit=PIN_C6,rcv=PIN_C7,bits=8,stream=PORT1)

char R[], G[], B[], buffer[] = "/0", c;
short liga = 0;
int cont = 0;
#INT_RDA
void  RDA_isr(void) 
{
   for(int i = 0; i < 4; i++){
         c = getc();
         buffer[i] = c;
         if(c == ')'){break;}
   }
   if(c == "0"||c == '1'||c == '2'||c == '3'||c == '4'||c == '5'||c == '6'||c == '7'||c == '8'||c == '9'||c == 'O'||c == 'F'||c == 'N'||c == '.'||c == ')' ){
      if(strcmp(buffer,"OFF)")){printf("cor: DELIGA");}
      printf("cor: %s",buffer);
   }
   
}

#INT_TIMER2
void  TIMER2_isr(void) 
{

}

void main()
{
   setup_timer_2(T2_DIV_BY_16,255,1);      //819 us overflow, 819 us interrupt


   enable_interrupts(INT_RDA);
   enable_interrupts(INT_TIMER2);
   enable_interrupts(GLOBAL);

   while(TRUE)
   {

      ;
      //TODO: User Code
   }

}
